<mat-dialog-content>
  <div class="w-full mb-[5px] flex items-center justify-between">
    <span class="font-medium">Створення транзакції</span>
    <mat-icon mat-dialog-close>clear</mat-icon>
  </div>
  <form [formGroup]="transactionCreationForm!" class="space-y-[5px]">
    <mat-form-field class="w-full">
      <mat-label>Назва транзакції</mat-label>
      <input formControlName="title" matInput />
    </mat-form-field>
    <mat-form-field class="w-full">
      <mat-label>Вартість транзакції</mat-label>
      <input formControlName="significance" type="number" matInput />
    </mat-form-field>
    <mat-form-field class="w-full">
      <mat-label>Тип транзакції</mat-label>
      <mat-select
        required
        formControlName="transactionType"
        [(ngModel)]="selectedTransactionType"
      >
        @for (transactionType of transactionTypes; track transactionType) {
        <mat-option [value]="transactionType.key">{{
          transactionType.value
        }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
    @if(selectedTransactionType === 'expense'){
    <mat-form-field class="w-full">
      <mat-label>Застосувати транзакцію</mat-label>
      <input formControlName="expenseDate" type="datetime-local" matInput />
      <mat-hint
        >Залиште поле порожнім, якщо Вас влаштовує поточна дата</mat-hint
      >
    </mat-form-field>
    } @if (selectedTransactionType === 'expense') {
    <mat-form-field class="w-full">
      <mat-label>Категорія транзакції</mat-label>
      <mat-select formControlName="transactionCategory">
        <mat-form-field class="w-full">
          <mat-label>Пошук категорії транзакції</mat-label>
          <input
            [(ngModel)]="seekingTransactionCategory"
            [ngModelOptions]="{ standalone: true }"
            (input)="filterTransactionCategories()"
            type="search"
            matInput
          />
        </mat-form-field>
        <div class="overflow-y-auto max-h-[96px] min-h-[48px]">
          @for (transactionCategory of transactionCategories; track
          transactionCategory) {
          <mat-option [value]="transactionCategory.title">{{
            transactionCategory.title
          }}</mat-option>
          }
        </div>
        <button (click)="opetCategoryCreationDialog()" class="w-full" mat-button>
          <mat-icon>add</mat-icon>
          Створити нову категорію
        </button>
        <hr />
        <mat-paginator
          (page)="pageHandler($event)"
          [length]="userCategoryQuantity"
          [pageSize]="4"
          [hidePageSize]="true"
          [showFirstLastButtons]="true"
        ></mat-paginator>
      </mat-select>
    </mat-form-field>
    }
  </form>
  <span>
    {{ errorMessage }}
  </span>
</mat-dialog-content>
<mat-dialog-actions>
  <button mat-button mat-dialog-close>Скасувати</button>
  <button
    mat-button
    (click)="createTransaction()"
    [disabled]="transactionCreationForm?.invalid"
  >
    Створити
  </button>
</mat-dialog-actions>
